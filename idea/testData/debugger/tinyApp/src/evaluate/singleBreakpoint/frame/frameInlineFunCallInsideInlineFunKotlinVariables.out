LineBreakpoint created at frameInlineFunCallInsideInlineFunKotlinVariables.kt:22
Run Java
Connected to the target VM
frameInlineFunCallInsideInlineFunKotlinVariables.kt:22
frameInlineFunCallInsideInlineFunKotlinVariables.kt:7
frameInlineFunCallInsideInlineFunKotlinVariables.kt:9
Compile bytecode for element
Compile bytecode for this.prop
// SHOW_KOTLIN_VARIABLES

package frameInlineFunCallInsideInlineFunKotlinVariables

class A {
    inline fun inlineFun(s: (Int) -> Unit) {
        val element = 1.0
        //TODO breakpoint here doesn't work (not only in tests)
        s(1)
    }

    val prop = 1
}

class B {
    inline fun foo(s: (Int) -> Unit) {
        val element = 2
        val a = A()
        // STEP_INTO: 1
        // STEP_OVER: 1
        //Breakpoint!
        a.inlineFun {
            val e = element
        }
        s(1)
    }
}

class C {
    fun bar() {
        val element = 1f
        B().foo {
            val e = element
        }
    }
}

fun main(args: Array<String>) {
    C().bar()
}

// PRINT_FRAME

// EXPRESSION: element
// RESULT: 1.0: D

// EXPRESSION: this.prop
// RESULT: 1: I


 frame    = bar:9, C {frameInlineFunCallInsideInlineFunKotlinVariables}
   this     = this = {frameInlineFunCallInsideInlineFunKotlinVariables.C@uniqueID}
              - Class has no fields
   local    = this (inline context): frameInlineFunCallInsideInlineFunKotlinVariables.A = {frameInlineFunCallInsideInlineFunKotlinVariables.A@uniqueID} (sp = null)
     field    = prop: int = 1 (sp = frameInlineFunCallInsideInlineFunKotlinVariables.kt, 12)
   local    = element: double = 1.0 (sp = frameInlineFunCallInsideInlineFunKotlinVariables.kt, 7)
Disconnected from the target VM

Process finished with exit code 0
